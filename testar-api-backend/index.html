<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>testar api</h1>
    <button onclick="cadastro()">cadastro</button>
    <button onclick="usuarios()">usuarios</button>
    <button onclick="deletar()">deletar usuario</button>
    <button onclick="login()">Login</button>
    <button onclick="update()">update</button>
    <script>
        const x = {
            nome: "enzo dante",
            email: "asd@gmail.com",
            telefone: "1200000000",
            senha: "123456"
        }
        let a = JSON.stringify(x)

        function http(url, dados){
            const xhttp = new XMLHttpRequest()
            xhttp.open("POST", url, false)
            xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            xhttp.send(dados)
            return xhttp.responseText
        }

        function cadastro(){
            let vv = http("http://localhost:3001/api/usuario/cadastro", `dados=${a}`)
            console.log(vv)
            // const xhttp = new XMLHttpRequest()
            // xhttp.onload = function(){
            //     let valor = this.responseText
            //     console.log(valor)
            // }

            // xhttp.open("POST", "http://localhost:3001/api/usuario/cadastro")
            // xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            
            // xhttp.send(`dados=${a}`)
        }

        function usuarios(){
            let vv = http("http://localhost:3001/api/getUsuarios", "")
            console.log(vv)
        }
        function deletar(){
            //expira em 1 hora
            const tt = {
                token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZF91c3VhcmlvIjo2LCJub21lIjoiZW56byBkYW50ZSIsImVtYWlsIjoiYXNkQGdtYWlsLmNvbSIsImlhdCI6MTY3NzM3MjYxNywiZXhwIjoxNjc3Mzc2MjE3fQ.5OlV6SWptfGGoT6l87FoOM6CMe2_3-KGVF_aRVP7TSw",
                id: 2
            }
            const t = JSON.stringify(tt)
            let vv = http("http://localhost:3001/api/usuario/remove", `dados=${t}`)
            console.log(vv)
        }
        function update(){
            const tt = {
                token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZF91c3VhcmlvIjo2LCJub21lIjoiZW56byBkYW50ZSIsImVtYWlsIjoiYXNkQGdtYWlsLmNvbSIsImlhdCI6MTY3NzM3MzM2NiwiZXhwIjoxNjc3Mzc2OTY2fQ.RqKBeznHTjGQ26PqGGmBVCY9tLVXL_8u1U3Mdt3hszc",
                id: 5,
                Update: {
                    nome: "nome teste",
                    email: "outro@gmail.com",
                    telefone: "1332432",
                    senha: "123"
                }
            }
            const t = JSON.stringify(tt)
            let vv = http("http://localhost:3001/api/usuario/update", `dados=${t}`)
            console.log(vv)
        }
        function login(){
            const teste = {
                email: "asd@gmail.com",
                senha: "123456"
            }
            const t = JSON.stringify(teste)
            let vv = http("http://localhost:3001/api/usuario/login", `dados=${t}`)
            console.log(vv)
        }
    </script>
</body>
</html>